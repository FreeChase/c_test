# 调试记录

## 操作指南
1. 调试数据流可参考 data_stream_receive.txt (GBK编码)
2. 可使用 secureCRT + VirtualSerialPortDriver  + sscom 实现调试
3. Ymodem传输时，先按照1024(STX)传，不够再按照128(SOT)传

## 解析数据

### 命令头

```lua
　　SOH 01H（modem数据头 128）
　　STX 02H（modem数据头 1024）
　　EOT 04H（发送结束）
　　ACK 06H（应答）
　　NAK 15H（非应答）
　　CAN 18H（取消发送）
```


### 数据流demo
日志可参考 data_stream_receive.txt

```lua
　　发送端                                     接收端       

 　　<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<    C

　　SOH 00 FF [ascii_name 00] [ascii_len 00] NUL CRC CRC >>>

　　<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<    ACK

　　<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<    C

　　STX 01 FE data[1024] CRC CRC>>>>>>>>>>>>>>>>>>>>>     

　　<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<   ACK

　　STX 02 FD data[1024] CRC CRC>>>>>>>>>>>>>>>>>>>>>

　　<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<   ACK

　　STX 03 FC data[1024] CRC CRC>>>>>>>>>>>>>>>>>>>>>

　　<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<   ACK

　　STX 04 FB data[1024] CRC CRC>>>>>>>>>>>>>>>>>>>>>

　　<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<   ACK

　　SOH 05 FA data[100]  1A[28] CRC CRC>>>>>>>>>>>>>>

　　<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<   ACK

　　EOT >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

　　<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<   NAK

　　EOT>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

　　<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<   ACK

　　<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<   C

　　SOH 00 FF NUL[128] CRCCRC >>>>>>>>>>>>>>>>>>>>>>>

　　<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<   ACK

```